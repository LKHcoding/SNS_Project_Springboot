<!-- {{>layout/header}} -->
<!DOCTYPE html>
<html
  xmlns:th="http://www.thymeleaf.org"
  xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout"
>
  <head th:replace="layout/header :: header"></head>
  <body>
    <nav th:replace="layout/header :: menu"></nav>
    <main id="feed">
      <div class="feed_all">
        <div class="feed_only">
          <!-- {{#images}} -->
          <div class="photo u-default-box" th:each="images : ${images}">
            <header class="photo__header">
              <img
                src="/upload/{{#user.profileImage}}{{user.profileImage}}{{/user.profileImage}}"
                onerror="this.src='/images/avatar.jpg'"
              />
              <span class="photo__username" th:text="${images.user.username}"
                >{{user.username}}여긴유저이름나오는곳</span
              >
            </header>

            <div class="photo_post_image">
              <!-- 사진꽉채우기 css -->
              <!-- <img src="/upload/{{imageUrl}}" /> -->
              <img th:src="@{|/upload/${images.imageUrl}|}" />
            </div>
            <div class="photo__info">
              <div class="photo__actions">
                <!-- <span class="photo__action" th:if="${images.likeState == true}"> -->
                <span class="photo__action">
                  <!--  {{#likeState}} -->
                  <i
                    th:if="${images.likeState == true}"
                    class="fa heart heart-clicked fa-heart"
                    th:onclick="|unLike(${images.id});|"
                  ></i>
                  <!--  {{/likeState}} 
                  
                  {{^likeState}} -->
                  <!-- <i class="fa fa-heart-o heart" th:onclick="like({{id}});"></i> -->
                  <i
                    th:unless="${images.likeState == true}"
                    class="fa fa-heart-o heart"
                    th:onclick="|like(${images.id});|"
                  ></i>
                  <!--  {{/likeState}} -->
                </span>
                <span class="photo__action">
                  <!-- {{! 메시지 아이콘 부분}} -->
                  <!-- <a href="/user/{{loginUser.id}}" -->
                  <a th:href="|/user/${session.loginUser.id}|"
                    ><i class="fa fa-comment-o"></i
                  ></a>
                  <!--  {{! https://fontawesome.com/icons?d=gallery&q=user 아이콘
                  주기}} -->
                </span>
              </div>

              <div class="photo_tag" th:each="tags : ${images.tags}">
                <!-- {{#tags}} -->
                <!-- <a th:href="/image/feed?tag={{name}}">asd</a> -->
                <a
                  th:href="|/image/feed?tag=${tags.name}|"
                  th:text="|#${tags.name}|"
                  >asd<!-- #{{name}} --></a
                >

                <!--  {{/tags}} -->
              </div>

              <span class="photo__likes">{{likeCount}} likes</span> <br />
              <br />
              <ul class="photo__comments">
                {{#comments}}
                <li class="photo__comment">
                  <span class="photo__comment-author">{{user.username}}</span>
                  <span style="font-size: 12px">{{content}}</span>
                  {{#commentHost}}
                  <i onclick="commentDelete({{id}});" class="fa fa-trash"></i>
                  {{/commentHost}}
                </li>
                {{/comments}}
              </ul>
              <span class="photo__date">{{createDate}}</span>

              <div class="photo__add-comment-container">
                <form id="frm-{{id}}" style="width: 100%">
                  <input type="hidden" name="userId" value="{{loginUser.id}}" />
                  <input type="hidden" name="imageId" value="{{id}}" />
                  <textarea
                    id="content-{{id}}"
                    name="content"
                    placeholder="Add a comment..."
                  ></textarea>
                </form>
                <i onclick="commentSend({{id}});" class="fa fa-angle-right"></i>
              </div>
            </div>
          </div>
          <!-- {{/images}} -->
        </div>
        <div class="sticky_side">
          <div class="fixed_side">
            <div class="side">
              <div>
                <b>회원님을 위한 추천 기능</b><br />
                <br />
              </div>
              <div><a href="#">instargram</a><br /></div>
              <div>
                <p>test</p>
                <br />
              </div>
              <div>
                <p>parkyoungun</p>
                <p>
                  <br />
                </p>
              </div>
              <div>
                <p>test1</p>
                <br />
              </div>
              <div>
                <p>test2</p>
                <br />
              </div>
              <div>
                <p>test3</p>
                <br />
              </div>
            </div>
            <div>{{>layout/sidefooter}}</div>
          </div>
        </div>
      </div>
    </main>

    <script></script>
    <script src="/js/comment.js"></script>
    <script src="/js/like.js"></script>
  </body>
</html>
